<!DOCTYPE html><html><head><meta charSet="utf-8" data-next-head=""/><meta name="viewport" content="width=device-width, initial-scale=1" data-next-head=""/><meta property="og:image" content="https://amwam.me/images/me.png" data-next-head=""/><link rel="manifest" href="/manifest.json" data-next-head=""/><link rel="alternate" type="application/rss+xml" title="RSS" href="https://amwam.me/rss.xml" data-next-head=""/><title data-next-head="">Preventing double clicks in React, with Hooks | AMWAM - Amit Shah</title><meta property="og:url" content="https://amwam.me/blog/preventing-double-clicks-in-react-with-hooks" data-next-head=""/><meta property="og:type" content="article" data-next-head=""/><meta property="og:title" content="Preventing double clicks in React, with Hooks | AMWAM - Amit Shah" data-next-head=""/><meta property="og:description" content="Preventing double clicks in React, with Hooks" data-next-head=""/><meta property="og:image" content="https://amwam.me/images/me.png" data-next-head=""/><meta property="article:published_time" content="2024-08-05" data-next-head=""/><meta property="article:author" content="Amit Shah" data-next-head=""/><link rel="preload" href="/_next/static/chunks/dd9a78eca37df397.css" as="style"/><link rel="preload" href="/_next/static/chunks/274988711c50b9b5.css" as="style"/><link rel="stylesheet" href="/_next/static/chunks/dd9a78eca37df397.css" data-n-g=""/><link rel="stylesheet" href="/_next/static/chunks/274988711c50b9b5.css" data-n-p=""/><noscript data-n-css=""></noscript><script src="/_next/static/chunks/9a04d3721f770a18.js" defer=""></script><script src="/_next/static/chunks/47a270e501e65340.js" defer=""></script><script src="/_next/static/chunks/28d7fb3b5b7550cd.js" defer=""></script><script src="/_next/static/chunks/181061b33a699bc3.js" defer=""></script><script src="/_next/static/chunks/turbopack-4a60034fd93a4310.js" defer=""></script><script src="/_next/static/chunks/72551891c21528a4.js" defer=""></script><script src="/_next/static/chunks/63a3ecd3c18c314a.js" defer=""></script><script src="/_next/static/chunks/turbopack-fce002bcd8c9627d.js" defer=""></script><script src="/_next/static/AqwFNSsOPBYJ3Xqf7dp8l/_ssgManifest.js" defer=""></script><script src="/_next/static/AqwFNSsOPBYJ3Xqf7dp8l/_buildManifest.js" defer=""></script></head><body><div id="__next"><div class="_app-module__3RcuBW__container"><div id="Navigation-module__KYCJma__nav-bar" role="navigation"><img id="Navigation-module__KYCJma__nav-display-picture" src="/images/me.200.png" alt="Me (Amit)" loading="lazy"/><div id="Navigation-module__KYCJma__name">Amit Shah</div><div id="Navigation-module__KYCJma__nav-links"><div class="Navigation-module__KYCJma__nav-link"><a href="/">Home</a></div><div class="Navigation-module__KYCJma__nav-link"><a href="/about">About</a></div><div class="Navigation-module__KYCJma__nav-link"><a href="/blog">Blog</a></div><div class="Navigation-module__KYCJma__nav-link"><a href="/contact">Contact</a></div></div></div><div id="_app-module__3RcuBW__content-wrapper"><main id="_app-module__3RcuBW__content"><div><h1>Preventing double clicks in React, with Hooks</h1><h4>5 August 2024</h4><div class="style-module__c7Ehta__tags"><span><a href="/blog?tag=javascript">javascript</a>, </span><span><a href="/blog?tag=react">react</a></span></div><p>This is a follow up to <a href="https://amwam.me/blog/preventing-double-clicks-in-react">my previous post</a>, about preventing double clicks in React, this time using <a href="https://react.dev/reference/react/hooks">React Hooks</a>.</p>
<p>When building interactive web applications, it&#x27;s crucial to prevent users from accidentally submitting forms or triggering actions multiple times. One effective and user-friendly approach is to disable the button immediately after it&#x27;s clicked.</p>
<h2>The Problem</h2>
<p>Consider a form submission button:</p>
<pre><code class="language-javascript">function SubmitButton() {
  const handleSubmit = () =&gt; {
    // Perform some action, e.g., API call
    console.log(&quot;Form submitted!&quot;);
  };

  return &lt;button onClick={handleSubmit}&gt;Submit&lt;/button&gt;;
}
</code></pre>
<p>If a user clicks this button twice quickly, the <code>handleSubmit</code> function will be called twice, potentially causing duplicate form submissions or API calls.</p>
<p>We can prevent double clicks by disabling the button immediately after it&#x27;s clicked. Here&#x27;s how we can implement this using React hooks:</p>
<pre><code class="language-javascript">import React from &quot;react&quot;;

function submitForm() {
  // Simulating an async action that returns a Promise
  return new Promise((resolve) =&gt; setTimeout(resolve, 1000));
}

function SubmitButton() {
  const [isSubmitting, setIsSubmitting] = React.useState(false);

  const handleSubmit = async () =&gt; {
    if (isSubmitting) {
      return; // Prevent double submission
    }

    setIsSubmitting(true);

    try {
      // Perform some action, e.g., API call
      await submitForm();
      console.log(&quot;Form submitted successfully!&quot;);
    } catch (error) {
      console.error(&quot;Error submitting form:&quot;, error);
    } finally {
      setIsSubmitting(false);
    }
  };

  return (
    &lt;button onClick={handleSubmit} disabled={isSubmitting}&gt;
      {isSubmitting ? &quot;Submitting...&quot; : &quot;Submit&quot;}
    &lt;/button&gt;
  );
}
</code></pre>
<p>Let&#x27;s break down this implementation:</p>
<ol>
<li>We use the <code>useState</code> hook to create an <code>isSubmitting</code> state variable, this lets us track when some background action is being run.</li>
<li>The <code>handleSubmit</code> function:<!-- -->
<ul>
<li>Checks if the form is already submitting and returns early if it is.</li>
<li>Sets <code>isSubmitting</code> to <code>true</code> before starting the submission process.</li>
<li>Uses a try/catch block to handle the submission and any potential errors.</li>
<li>Sets <code>isSubmitting</code> back to <code>false</code> in the <code>finally</code> block, ensuring the button is re-enabled even if an error occurs.</li>
</ul>
</li>
<li>The button&#x27;s <code>disabled</code> prop is tied to the <code>isSubmitting</code> state, so that the user can&#x27;t click it again to trigger the action.</li>
<li>The button text changes to provide feedback to the user.</li>
</ol>
<p>We can also take this a step further, and create our own hook to extract this logic.</p>
<pre><code class="language-javascript">import React from &#x27;react&#x27;;

function submitForm() {
    // Simulating an async action that returns a Promise
    return new Promise(resolve =&gt; setTimeout(resolve, 1000))
}

export function useIsSubmitting(action): [loading, action] {
  const [loading, setLoading] = React.useState(false);

  function doAction(...x) {
    setLoading(true);
    return action(...x).finally(() =&gt; setLoading(false));
  }

  return [loading, doAction];
}

function SubmitButton() {
  const [isSubmitting, doHandleSubmit] = useIsSubmitting(submitForm);

  return (
    &lt;button onClick={doHandleSubmit} disabled={isSubmitting}&gt;
      {isSubmitting ? &quot;Submitting...&quot; : &quot;Submit&quot;}
    &lt;/button&gt;
  );
}


</code></pre>
<p>The final component doesn&#x27;t need to handle any logic for reseting <code>isSubmitting</code>, and can focus on rendering the different states.</p>
<h2>Conclusion</h2>
<p>Disabling the button after it&#x27;s clicked is a simple yet effective way to prevent double clicks and double submissions in React applications. This approach provides clear visual feedback to the user and ensures that actions are only triggered once, even if the user accidentally clicks multiple times. By combining this with proper error handling and timeouts, you can create a robust and user-friendly interface for your forms and action buttons.</p></div></main></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"POST":"This is a follow up to [my previous post](https://amwam.me/blog/preventing-double-clicks-in-react), about preventing double clicks in React, this time using [React Hooks](https://react.dev/reference/react/hooks).\n\nWhen building interactive web applications, it's crucial to prevent users from accidentally submitting forms or triggering actions multiple times. One effective and user-friendly approach is to disable the button immediately after it's clicked.\n\n## The Problem\n\nConsider a form submission button:\n\n```javascript\nfunction SubmitButton() {\n  const handleSubmit = () =\u003e {\n    // Perform some action, e.g., API call\n    console.log(\"Form submitted!\");\n  };\n\n  return \u003cbutton onClick={handleSubmit}\u003eSubmit\u003c/button\u003e;\n}\n```\n\nIf a user clicks this button twice quickly, the `handleSubmit` function will be called twice, potentially causing duplicate form submissions or API calls.\n\nWe can prevent double clicks by disabling the button immediately after it's clicked. Here's how we can implement this using React hooks:\n\n```javascript\nimport React from \"react\";\n\nfunction submitForm() {\n  // Simulating an async action that returns a Promise\n  return new Promise((resolve) =\u003e setTimeout(resolve, 1000));\n}\n\nfunction SubmitButton() {\n  const [isSubmitting, setIsSubmitting] = React.useState(false);\n\n  const handleSubmit = async () =\u003e {\n    if (isSubmitting) {\n      return; // Prevent double submission\n    }\n\n    setIsSubmitting(true);\n\n    try {\n      // Perform some action, e.g., API call\n      await submitForm();\n      console.log(\"Form submitted successfully!\");\n    } catch (error) {\n      console.error(\"Error submitting form:\", error);\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  return (\n    \u003cbutton onClick={handleSubmit} disabled={isSubmitting}\u003e\n      {isSubmitting ? \"Submitting...\" : \"Submit\"}\n    \u003c/button\u003e\n  );\n}\n```\n\nLet's break down this implementation:\n\n1. We use the `useState` hook to create an `isSubmitting` state variable, this lets us track when some background action is being run.\n2. The `handleSubmit` function:\n   - Checks if the form is already submitting and returns early if it is.\n   - Sets `isSubmitting` to `true` before starting the submission process.\n   - Uses a try/catch block to handle the submission and any potential errors.\n   - Sets `isSubmitting` back to `false` in the `finally` block, ensuring the button is re-enabled even if an error occurs.\n3. The button's `disabled` prop is tied to the `isSubmitting` state, so that the user can't click it again to trigger the action.\n4. The button text changes to provide feedback to the user.\n\nWe can also take this a step further, and create our own hook to extract this logic.\n\n```javascript\nimport React from 'react';\n\nfunction submitForm() {\n    // Simulating an async action that returns a Promise\n    return new Promise(resolve =\u003e setTimeout(resolve, 1000))\n}\n\nexport function useIsSubmitting(action): [loading, action] {\n  const [loading, setLoading] = React.useState(false);\n\n  function doAction(...x) {\n    setLoading(true);\n    return action(...x).finally(() =\u003e setLoading(false));\n  }\n\n  return [loading, doAction];\n}\n\nfunction SubmitButton() {\n  const [isSubmitting, doHandleSubmit] = useIsSubmitting(submitForm);\n\n  return (\n    \u003cbutton onClick={doHandleSubmit} disabled={isSubmitting}\u003e\n      {isSubmitting ? \"Submitting...\" : \"Submit\"}\n    \u003c/button\u003e\n  );\n}\n\n\n```\n\nThe final component doesn't need to handle any logic for reseting `isSubmitting`, and can focus on rendering the different states.\n\n## Conclusion\n\nDisabling the button after it's clicked is a simple yet effective way to prevent double clicks and double submissions in React applications. This approach provides clear visual feedback to the user and ensures that actions are only triggered once, even if the user accidentally clicks multiple times. By combining this with proper error handling and timeouts, you can create a robust and user-friendly interface for your forms and action buttons.\n"},"__N_SSG":true},"page":"/blog/[slug]","query":{"slug":"preventing-double-clicks-in-react-with-hooks"},"buildId":"AqwFNSsOPBYJ3Xqf7dp8l","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>
<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8" data-next-head=""/><meta name="viewport" content="width=device-width, initial-scale=1" data-next-head=""/><title data-next-head="">Preventing double clicks in React | AMWAM - Amit Shah</title><meta name="description" content="UPDATE 5th August 2024 : An updated version of this post, using React Hooks is available at: [https://amwam.me/blog/preventing-double-clicks-in-react..." data-next-head=""/><link rel="canonical" href="https://amwam.me/blog/preventing-double-clicks-in-react" data-next-head=""/><meta property="og:title" content="Preventing double clicks in React | AMWAM - Amit Shah" data-next-head=""/><meta property="og:description" content="UPDATE 5th August 2024 : An updated version of this post, using React Hooks is available at: [https://amwam.me/blog/preventing-double-clicks-in-react..." data-next-head=""/><meta property="og:url" content="https://amwam.me/blog/preventing-double-clicks-in-react" data-next-head=""/><meta property="og:type" content="article" data-next-head=""/><meta property="og:image" content="https://amwam.me/images/me.png" data-next-head=""/><meta property="og:site_name" content="AMWAM - Amit Shah" data-next-head=""/><meta name="twitter:card" content="summary" data-next-head=""/><meta name="twitter:title" content="Preventing double clicks in React | AMWAM - Amit Shah" data-next-head=""/><meta name="twitter:description" content="UPDATE 5th August 2024 : An updated version of this post, using React Hooks is available at: [https://amwam.me/blog/preventing-double-clicks-in-react..." data-next-head=""/><meta name="twitter:image" content="https://amwam.me/images/me.png" data-next-head=""/><meta property="article:published_time" content="2019-01-14" data-next-head=""/><meta property="article:author" content="Amit Shah" data-next-head=""/><link rel="alternate" type="application/rss+xml" title="RSS" href="https://amwam.me/rss.xml" data-next-head=""/><link rel="manifest" href="/manifest.json" data-next-head=""/><link rel="preload" href="/_next/static/chunks/1dd38dfe42287d23.css" as="style"/><link rel="preload" href="/_next/static/chunks/274988711c50b9b5.css" as="style"/><script type="application/ld+json" data-next-head="">{"@context":"https://schema.org","@type":"BlogPosting","headline":"Preventing double clicks in React","datePublished":"2019-01-14","author":{"@type":"Person","name":"Amit Shah","url":"https://amwam.me"},"publisher":{"@type":"Person","name":"Amit Shah"},"description":"UPDATE 5th August 2024 : An updated version of this post, using React Hooks is available at: [https://amwam.me/blog/preventing-double-clicks-in-react...","mainEntityOfPage":{"@type":"WebPage","@id":"https://amwam.me/blog/preventing-double-clicks-in-react"}}</script><link rel="stylesheet" href="/_next/static/chunks/1dd38dfe42287d23.css" data-n-g=""/><link rel="stylesheet" href="/_next/static/chunks/274988711c50b9b5.css" data-n-p=""/><noscript data-n-css=""></noscript><script src="/_next/static/chunks/041a34037a337b5e.js" defer=""></script><script src="/_next/static/chunks/36f05eb6ef3c9965.js" defer=""></script><script src="/_next/static/chunks/712756a8d1494f32.js" defer=""></script><script src="/_next/static/chunks/7db6e267ca9f038c.js" defer=""></script><script src="/_next/static/chunks/turbopack-f9c3202ec8e598bc.js" defer=""></script><script src="/_next/static/chunks/1ff83552535eb707.js" defer=""></script><script src="/_next/static/chunks/653b9ffc688b6a3e.js" defer=""></script><script src="/_next/static/chunks/turbopack-98c1391d58453be5.js" defer=""></script><script src="/_next/static/Zhb4FTZlDtKAFb0w6uubc/_ssgManifest.js" defer=""></script><script src="/_next/static/Zhb4FTZlDtKAFb0w6uubc/_buildManifest.js" defer=""></script></head><body><div id="__next"><div class="_app-module__3RcuBW__container"><a href="#main-content" class="_app-module__3RcuBW__skip-link">Skip to main content</a><nav id="Navigation-module__KYCJma__nav-bar" role="navigation" aria-label="Main navigation"><img id="Navigation-module__KYCJma__nav-display-picture" src="/images/me.200.png" alt="Amit Shah profile picture" loading="lazy"/><div id="Navigation-module__KYCJma__name" aria-label="Site owner">Amit Shah</div><div id="Navigation-module__KYCJma__nav-links"><div class="Navigation-module__KYCJma__nav-link"><a aria-label="Navigate to home page" href="/">Home</a></div><div class="Navigation-module__KYCJma__nav-link"><a aria-label="Navigate to about page" href="/about">About</a></div><div class="Navigation-module__KYCJma__nav-link"><a aria-label="Navigate to blog" href="/blog">Blog</a></div><div class="Navigation-module__KYCJma__nav-link"><a aria-label="Navigate to contact page" href="/contact">Contact</a></div></div></nav><div id="_app-module__3RcuBW__content-wrapper"><main id="main-content" class="_app-module__3RcuBW__content"><div><script type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"https://amwam.me/"},{"@type":"ListItem","position":2,"name":"Blog","item":"https://amwam.me/blog"},{"@type":"ListItem","position":3,"name":"Preventing double clicks in React"}]}</script><nav aria-label="Breadcrumb" style="margin-bottom:1rem"><ol style="display:flex;list-style:none;padding:0;margin:0;gap:0.5rem"><li style="display:flex;align-items:center"><a href="/">Home</a></li><li style="display:flex;align-items:center"><span style="margin:0 0.5rem">/</span><a href="/blog">Blog</a></li><li style="display:flex;align-items:center"><span style="margin:0 0.5rem">/</span><span aria-current="page">Preventing double clicks in React</span></li></ol></nav><h1>Preventing double clicks in React</h1><div><time dateTime="2019-01-14">14 January 2019</time></div><div class="style-module__c7Ehta__tags"><span><a href="/blog?tag=javascript">javascript</a>, </span><span><a href="/blog?tag=react">react</a></span></div><h2><em>UPDATE 5th August 2024</em>: An updated version of this post, using React Hooks is available at: <a href="https://amwam.me/blog/preventing-double-clicks-in-react-with-hooks">https://amwam.me/blog/preventing-double-clicks-in-react-with-hooks</a></h2>
<p>Most of the time in React you will pass an onClick handler to a button, and whenever that button is click, expect that function to be called.</p>
<pre><code class="language-javascript">&lt;button onClick={() =&gt; console.log(&quot;I was called&quot;)}&gt;Click me&lt;/button&gt;
</code></pre>
<p>This <code>onClick</code> will get called, every time the button is clicked.
Sometimes this function might call an endpoint, and in some cases, you may not want that endpoint to run multiple times.</p>
<p>To get around this, you can use state to detect if the button was clicked, disable the button from being clicked further, then perform our action.
The steps would be:</p>
<ol>
<li>Click the button</li>
<li>Set the state of the component to track the button click</li>
<li>Update the button (re-render) to disable it, and prevent further clicking</li>
<li>Perform our action (using <code>componentDidUpdate</code>)</li>
<li>Restore the button state, once the action is complete</li>
</ol>
<h2>Example:</h2>
<p>Below is a custom component that handles doubleclicking of buttons. All of its props are passed down to the HTML <code>button</code> element, except the <code>onClick</code> handler, which we will wrap with our custom logic.</p>
<pre><code class="language-javascript">import React from &quot;react&quot;;

class PreventDoubleClickButton extends React.component {
  constructor(props) {
    super(props);
    this.state = { clicked: false };

    this.onClick = this.onClick.bind(this);
  }

  onClick(event) {
    this.setState({ clicked: true });
  }

  componentDidUpdate(prevProps, prevState) {
    // If we previously weren&#x27;t clicked, and then updated to be clicked, we want to run our click handler;
    if (!prevState.clicked &amp;&amp; this.state.clicked) {
      // Here we expect the onClick function passed down, to return a Promise, once complete
      this.props.onClick().then(() =&gt; {
        this.setState({ clicked: true });
      });
    }
  }

  render() {
    return (
      &lt;button {...this.props} onClick={this.onClick}&gt;
        {this.props.children}
      &lt;/button&gt;
    );
  }
}

// Usage

function handleClick() {
  return fetch(&quot;./myData.json&quot;).then(() =&gt; {
    this.setState({ data: &quot;Got it!&quot; });
  });
}

&lt;PreventDoubleClickButton className=&quot;myButton&quot; onClick={this.handleClick}&gt;
  Click me
&lt;/PreventDoubleClickButton&gt;;
</code></pre></div></main></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"POST":"*UPDATE 5th August 2024*: An updated version of this post, using React Hooks is available at: [https://amwam.me/blog/preventing-double-clicks-in-react-with-hooks](https://amwam.me/blog/preventing-double-clicks-in-react-with-hooks)\n--- \nMost of the time in React you will pass an onClick handler to a button, and whenever that button is click, expect that function to be called.\n\n```javascript\n\u003cbutton onClick={() =\u003e console.log(\"I was called\")}\u003eClick me\u003c/button\u003e\n```\n\nThis `onClick` will get called, every time the button is clicked.\nSometimes this function might call an endpoint, and in some cases, you may not want that endpoint to run multiple times.\n\nTo get around this, you can use state to detect if the button was clicked, disable the button from being clicked further, then perform our action.\nThe steps would be:\n\n1. Click the button\n2. Set the state of the component to track the button click\n3. Update the button (re-render) to disable it, and prevent further clicking\n4. Perform our action (using `componentDidUpdate`)\n5. Restore the button state, once the action is complete\n\n## Example:\n\nBelow is a custom component that handles doubleclicking of buttons. All of its props are passed down to the HTML `button` element, except the `onClick` handler, which we will wrap with our custom logic.\n\n```javascript\nimport React from \"react\";\n\nclass PreventDoubleClickButton extends React.component {\n  constructor(props) {\n    super(props);\n    this.state = { clicked: false };\n\n    this.onClick = this.onClick.bind(this);\n  }\n\n  onClick(event) {\n    this.setState({ clicked: true });\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    // If we previously weren't clicked, and then updated to be clicked, we want to run our click handler;\n    if (!prevState.clicked \u0026\u0026 this.state.clicked) {\n      // Here we expect the onClick function passed down, to return a Promise, once complete\n      this.props.onClick().then(() =\u003e {\n        this.setState({ clicked: true });\n      });\n    }\n  }\n\n  render() {\n    return (\n      \u003cbutton {...this.props} onClick={this.onClick}\u003e\n        {this.props.children}\n      \u003c/button\u003e\n    );\n  }\n}\n\n// Usage\n\nfunction handleClick() {\n  return fetch(\"./myData.json\").then(() =\u003e {\n    this.setState({ data: \"Got it!\" });\n  });\n}\n\n\u003cPreventDoubleClickButton className=\"myButton\" onClick={this.handleClick}\u003e\n  Click me\n\u003c/PreventDoubleClickButton\u003e;\n```\n"},"__N_SSG":true},"page":"/blog/[slug]","query":{"slug":"preventing-double-clicks-in-react"},"buildId":"Zhb4FTZlDtKAFb0w6uubc","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>
{"pageProps":{"POST":"Dealing with legacy code can be tough, even more so if you want to slowly migrate your front end to React.\n\nRecently I found myself in a situation where some HTML was rendered server side, and inserted into the browser on request. I wanted to use a shiny new React component, instead of falling back to the legacy jQuery code.\n\nIn comes [Web Components](https://www.webcomponents.org)!\n\nWeb Components allow you to write your own HTML tags, and use them through out your application. This solves my problem, by having the server render the new HTML tag, and the front end automatically load the required JavaScript to render/control it. When rendering the Web Component we can delegate the actual rendering to React.\n\nLets start with a simple React component:\n\n```JavaScript\nimport React from \"react\";\n\nclass MyComponent extends React.Component {\n  render() {\n    return <div>Hello world! This was rendered using React!</div>;\n  }\n}\n```\n\nIn order to render the component, we have to create a new HTMLElement as so:\n\n```JavaScript\nclass CustomHTMLElement extends HTMLElement {\n  connectedCallback() {\n    ReactDOM.render(<MyComponent />, this);\n  }\n}\n```\n\nIn this, when the component is loaded by the browser, the `connectedCallback` will be called, allowing us to render the new component, at `this` (the location of the element in the DOM).\n\nTo finish, we just have to register the element with the customElements API:\n\n```JavaScript\ncustomElements.define(\"x-test\", CustomHTMLElement);\n```\n\nNow we can just use the tag `<x-test/>` in our HTML, to render the React component!\n\nOne problem with this setup can be [Babel](https://babeljs.io), as it doesn't play nice with transforming classes and extending `HTMLElement`.\nWe can work around this using a custom class, and extending the prototype of HTMLElement:\n\n```JavaScript\nfunction BabelHTMLElement() {\n  const newTarget = Object.getPrototypeOf(this).constructor;\n  return Reflect.construct(HTMLElement, [], newTarget);\n}\n\nObject.setPrototypeOf(BabelHTMLElement.prototype, HTMLElement.prototype);\n\nclass CustomHTMLElement extends BabelHTMLElement {\n    ...\n```\n\nNow our `CustomHTMLElement` extends the `BabelHTMLElement` rather the `HTMLElement` directly.\n\nTo view an example project with this in use, you can checkout the repo here: [https://github.com/Amwam/react-webcomponents](https://github.com/Amwam/react-webcomponents)\n"},"__N_SSG":true}